<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ –¥–ª—è 5 –∫–ª–∞—Å—Å–∞</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f9ff;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 150, 0.1);
            padding: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .online-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }
        
        header {
            text-align: center;
            padding-bottom: 20px;
            margin-bottom: 30px;
            border-bottom: 3px solid #4a6fa5;
            background: linear-gradient(90deg, #4a6fa5, #3a8bc8);
            color: white;
            margin: -30px -30px 30px -30px;
            padding: 30px;
            border-radius: 15px 15px 0 0;
        }
        
        h1 {
            margin-top: 0;
            font-size: 2.2em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
            margin-top: 10px;
        }
        
        .access-panel {
            background: linear-gradient(135deg, #f8f9ff, #e8f0fe);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 2px solid #d0e2ff;
            text-align: center;
        }
        
        .test-info {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            gap: 20px;
            margin: 25px 0;
        }
        
        .info-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            flex: 1;
            min-width: 200px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            text-align: center;
            border-top: 4px solid #4a6fa5;
        }
        
        .info-card h3 {
            margin-top: 0;
            color: #4a6fa5;
        }
        
        .access-code-section {
            margin: 30px 0;
        }
        
        .access-code-input {
            padding: 15px 20px;
            border: 2px solid #4a6fa5;
            border-radius: 10px;
            font-size: 18px;
            width: 100%;
            max-width: 300px;
            text-align: center;
            margin: 10px auto;
            display: block;
            font-weight: bold;
            letter-spacing: 2px;
        }
        
        .student-info {
            background-color: #f0f8ff;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 5px solid #4a6fa5;
        }
        
        .student-info label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .student-info input, .student-info select {
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            width: 100%;
            max-width: 400px;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .test-instructions {
            background-color: #fff9e6;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 5px solid #ffcc00;
        }
        
        .question {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .question:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transform: translateY(-2px);
        }
        
        .question-number {
            display: inline-block;
            background: linear-gradient(135deg, #4a6fa5, #3a8bc8);
            color: white;
            width: 35px;
            height: 35px;
            text-align: center;
            line-height: 35px;
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .question-text {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1em;
            color: #2c3e50;
        }
        
        .answer-input {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            width: 200px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .answer-input:focus {
            border-color: #4a6fa5;
            outline: none;
        }
        
        .buttons {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px dashed #ddd;
        }
        
        button {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin: 0 15px;
            transition: all 0.3s;
            min-width: 200px;
        }
        
        #startTest, #checkTest, #submitTest {
            background: linear-gradient(135deg, #4a6fa5, #3a8bc8);
            color: white;
            box-shadow: 0 4px 8px rgba(74, 111, 165, 0.3);
        }
        
        #startTest:hover, #checkTest:hover, #submitTest:hover {
            background: linear-gradient(135deg, #3a5a80, #2a7bb8);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(74, 111, 165, 0.4);
        }
        
        #resetTest {
            background-color: #f0f0f0;
            color: #333;
        }
        
        #resetTest:hover {
            background-color: #e0e0e0;
            transform: translateY(-3px);
        }
        
        .results {
            display: none;
            background: linear-gradient(135deg, #e8f7e8, #d4edda);
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            border-left: 5px solid #4CAF50;
        }
        
        .score {
            font-size: 2em;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .grade-badge {
            display: inline-block;
            padding: 10px 25px;
            background-color: #4CAF50;
            color: white;
            border-radius: 50px;
            font-size: 1.5em;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .correct {
            color: #4CAF50;
        }
        
        .incorrect {
            color: #e74c3c;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            color: #7f8c8d;
            font-size: 0.9em;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .hidden {
            display: none !important;
        }
        
        .teacher-link {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 10px;
        }
        
        .share-link {
            background-color: #e8f0fe;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            word-break: break-all;
            font-family: monospace;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            header {
                padding: 20px;
                margin: -20px -20px 20px -20px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .test-info {
                flex-direction: column;
            }
            
            .info-card {
                min-width: 100%;
            }
            
            button {
                width: 100%;
                margin: 10px 0;
                min-width: auto;
            }
            
            .answer-input {
                width: 100%;
            }
            
            .online-badge {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 15px;
                display: inline-block;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="online-badge">–û–ù–õ–ê–ô–ù-–¢–ï–°–¢</div>
        
        <header>
            <h1>–û–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ</h1>
            <div class="subtitle">5 –∫–ª–∞—Å—Å - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤</div>
        </header>
        
        <div id="accessPanel" class="access-panel">
            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ –æ–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ!</h2>
            <p>–î–ª—è —É—á–∞—Å—Ç–∏—è –≤ —Ç–µ—Å—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞ —É —É—á–∏—Ç–µ–ª—è.</p>
            
            <div class="test-info">
                <div class="info-card">
                    <h3>üìù –û —Ç–µ—Å—Ç–µ</h3>
                    <p>20 –∑–∞–¥–∞–Ω–∏–π –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ</p>
                    <p>–í—Ä–µ–º—è: 30-40 –º–∏–Ω—É—Ç</p>
                    <p>–î–ª—è 5 –∫–ª–∞—Å—Å–∞</p>
                </div>
                
                <div class="info-card">
                    <h3>üéØ –¶–µ–ª—å</h3>
                    <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤</p>
                    <p>–°–ª–æ–∂–µ–Ω–∏–µ, –≤—ã—á–∏—Ç–∞–Ω–∏–µ, —É–º–Ω–æ–∂–µ–Ω–∏–µ, –¥–µ–ª–µ–Ω–∏–µ</p>
                </div>
                
                <div class="info-card">
                    <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
                    <p>–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</p>
                    <p>–û—Ü–µ–Ω–∫–∞ –ø–æ 5-–±–∞–ª–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ</p>
                    <p>–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –æ—à–∏–±–æ–∫</p>
                </div>
            </div>
            
            <div class="access-code-section">
                <h3>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞:</h3>
                <input type="text" id="accessCode" class="access-code-input" placeholder="XXXXXX" maxlength="6" autocomplete="off">
                <br>
                <button id="startTest">–ù–ê–ß–ê–¢–¨ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï</button>
                <p id="accessMessage" style="margin-top: 15px;"></p>
            </div>
            
            <div class="teacher-link">
                <p><strong>–£—á–∏—Ç–µ–ª—è–º:</strong> –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.</p>
            </div>
        </div>
        
        <div id="testContent" class="hidden">
            <div class="student-info">
                <h3>üìã –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–µ–Ω–∏–∫–∞</h3>
                <label for="studentName">–§–∞–º–∏–ª–∏—è –∏ –ò–º—è:</label>
                <input type="text" id="studentName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω–æ–≤ –ê–ª–µ–∫—Å–µ–π">
                
                <label for="className">–ö–ª–∞—Å—Å:</label>
                <select id="className">
                    <option value="5">5 –∫–ª–∞—Å—Å</option>
                    <option value="5–ê">5–ê –∫–ª–∞—Å—Å</option>
                    <option value="5–ë">5–ë –∫–ª–∞—Å—Å</option>
                    <option value="5–í">5–í –∫–ª–∞—Å—Å</option>
                    <option value="5–ì">5–ì –∫–ª–∞—Å—Å</option>
                </select>
                
                <label for="schoolName">–®–∫–æ–ª–∞:</label>
                <input type="text" id="schoolName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–ë–û–£ –°–û–® ‚Ññ1">
            </div>
            
            <div class="test-instructions">
                <h3>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é —Ç–µ—Å—Ç–∞:</h3>
                <ol>
                    <li>–¢–µ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç 20 –∑–∞–¥–∞–Ω–∏–π –Ω–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è</li>
                    <li>–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è - –ø—Ä–∏–º–µ—Ä–Ω–æ 30-40 –º–∏–Ω—É—Ç</li>
                    <li>–í–ø–∏—à–∏—Ç–µ –æ—Ç–≤–µ—Ç—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è</li>
                    <li>–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ó–ê–í–ï–†–®–ò–¢–¨ –¢–ï–°–¢"</li>
                    <li>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏</li>
                </ol>
                <p style="color: #d35400; font-weight: bold;">‚ö†Ô∏è –ù–µ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!</p>
            </div>
            
            <div id="testQuestions">
                <!-- –í–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
            </div>
            
            <div class="buttons">
                <button id="checkTest">–ü–†–û–í–ï–†–ò–¢–¨ –û–¢–í–ï–¢–´</button>
                <button id="submitTest" class="hidden">–ó–ê–í–ï–†–®–ò–¢–¨ –¢–ï–°–¢</button>
                <button id="resetTest">–ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û</button>
            </div>
            
            <div id="testResults" class="results">
                <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
                <div class="score">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: <span id="scoreValue">0</span> –∏–∑ 20</div>
                <div id="gradeContainer"></div>
                <div id="detailedResults"></div>
                <div class="share-link" id="resultLink" style="display: none;"></div>
            </div>
        </div>
        
        <div class="footer">
            <p>–û–Ω–ª–∞–π–Ω-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ –¥–ª—è —É—á–∞—â–∏—Ö—Å—è 5 –∫–ª–∞—Å—Å–∞</p>
            <p>–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ¬© 2023</p>
            <p style="font-size: 0.8em; margin-top: 10px;">–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç</p>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞
        const TEST_CONFIG = {
            accessCode: "MATH25", // –ö–æ–¥ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ—Å—Ç—É
            testName: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ 5 –∫–ª–∞—Å—Å",
            questionsCount: 20,
            passingGrade: 50 // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –¥–ª—è –∑–∞—á–µ—Ç–∞
        };
        
        // –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ç–µ—Å—Ç–∞ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
        const TEST_TEMPLATES = {
            addition: [
                { template: "___ + ___", min: 100, max: 500 },
                { template: "___ + ___ + ___", min: 10, max: 200 }
            ],
            subtraction: [
                { template: "___ - ___", min: 100, max: 500 },
                { template: "___ - ___", min: 500, max: 1000 }
            ],
            multiplication: [
                { template: "___ √ó ___", min: 2, max: 15 },
                { template: "___ √ó ___", min: 10, max: 25 }
            ],
            division: [
                { template: "___ √∑ ___", min: 10, max: 100 },
                { template: "___ √∑ ___", min: 100, max: 1000 }
            ]
        };

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let testQuestions = [];
        let studentAnswers = [];
        let testStarted = false;

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
        function getRandomNumber(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Ç–µ—Å—Ç–∞
        function generateTestQuestions() {
            testQuestions = [];
            
            // 1-5: –°–ª–æ–∂–µ–Ω–∏–µ
            for (let i = 0; i < 5; i++) {
                const a = getRandomNumber(100, 500);
                const b = getRandomNumber(100, 500);
                testQuestions.push({
                    id: i,
                    question: `${a} + ${b}`,
                    answer: a + b,
                    category: "–°–ª–æ–∂–µ–Ω–∏–µ"
                });
            }
            
            // 6-10: –í—ã—á–∏—Ç–∞–Ω–∏–µ
            for (let i = 5; i < 10; i++) {
                const a = getRandomNumber(200, 800);
                const b = getRandomNumber(100, 500);
                testQuestions.push({
                    id: i,
                    question: `${a} - ${b}`,
                    answer: a - b,
                    category: "–í—ã—á–∏—Ç–∞–Ω–∏–µ"
                });
            }
            
            // 11-15: –£–º–Ω–æ–∂–µ–Ω–∏–µ
            for (let i = 10; i < 15; i++) {
                const a = getRandomNumber(2, 20);
                const b = getRandomNumber(2, 15);
                testQuestions.push({
                    id: i,
                    question: `${a} √ó ${b}`,
                    answer: a * b,
                    category: "–£–º–Ω–æ–∂–µ–Ω–∏–µ"
                });
            }
            
            // 16-20: –î–µ–ª–µ–Ω–∏–µ (—Å–¥–µ–ª–∞–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª —Ü–µ–ª—ã–º)
            for (let i = 15; i < 20; i++) {
                const divisor = getRandomNumber(2, 12);
                const result = getRandomNumber(5, 50);
                const dividend = divisor * result;
                testQuestions.push({
                    id: i,
                    question: `${dividend} √∑ ${divisor}`,
                    answer: result,
                    category: "–î–µ–ª–µ–Ω–∏–µ"
                });
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–æ–ø—Ä–æ—Å—ã –≤ localStorage –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
            localStorage.setItem('mathTestQuestions', JSON.stringify(testQuestions));
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ—Å—Ç—É
        function checkAccess() {
            const enteredCode = document.getElementById('accessCode').value.trim().toUpperCase();
            const accessMessage = document.getElementById('accessMessage');
            
            if (enteredCode === TEST_CONFIG.accessCode) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ—Å—Ç
                document.getElementById('accessPanel').classList.add('hidden');
                document.getElementById('testContent').classList.remove('hidden');
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã
                const savedQuestions = localStorage.getItem('mathTestQuestions');
                if (savedQuestions) {
                    testQuestions = JSON.parse(savedQuestions);
                } else {
                    generateTestQuestions();
                }
                
                displayTestQuestions();
                testStarted = true;
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–∞—á–∞–ª—É —Ç–µ—Å—Ç–∞
                document.getElementById('testContent').scrollIntoView({ behavior: 'smooth' });
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∞–∫—Ç –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∞
                localStorage.setItem('testStarted', 'true');
            } else {
                accessMessage.textContent = "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —É—á–∏—Ç–µ–ª—é.";
                accessMessage.style.color = "#e74c3c";
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –æ—à–∏–±–∫–∏
                const input = document.getElementById('accessCode');
                input.style.borderColor = "#e74c3c";
                input.style.transform = "translateX(5px)";
                setTimeout(() => {
                    input.style.transform = "translateX(-5px)";
                }, 100);
                setTimeout(() => {
                    input.style.transform = "translateX(0)";
                    input.style.borderColor = "#4a6fa5";
                }, 200);
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ —Ç–µ—Å—Ç–∞
        function displayTestQuestions() {
            const testContainer = document.getElementById('testQuestions');
            testContainer.innerHTML = '';
            
            testQuestions.forEach((item, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.id = `question-${index}`;
                
                questionDiv.innerHTML = `
                    <div>
                        <span class="question-number">${index + 1}</span>
                        <span class="question-text">–í—ã—á–∏—Å–ª–∏—Ç–µ: ${item.question}</span>
                    </div>
                    <div style="margin-top: 15px;">
                        <label for="answer${index}">–û—Ç–≤–µ—Ç:</label>
                        <input type="number" class="answer-input" id="answer${index}" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ" data-question-id="${item.id}">
                        <span id="hint${index}" style="margin-left: 15px; font-size: 0.9em; color: #7f8c8d;"></span>
                    </div>
                `;
                
                testContainer.appendChild(questionDiv);
            });
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
        function checkAnswers() {
            let allFilled = true;
            studentAnswers = [];
            
            testQuestions.forEach((item, index) => {
                const userAnswer = document.getElementById(`answer${index}`).value.trim();
                const hintElement = document.getElementById(`hint${index}`);
                
                if (userAnswer === '') {
                    allFilled = false;
                    hintElement.textContent = "‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç";
                    hintElement.style.color = "#e67e22";
                    document.getElementById(`question-${index}`).style.backgroundColor = "#fff3cd";
                } else {
                    const answerNum = parseInt(userAnswer);
                    studentAnswers.push({
                        questionId: item.id,
                        question: item.question,
                        userAnswer: answerNum,
                        correctAnswer: item.answer,
                        isCorrect: answerNum === item.answer
                    });
                    
                    // –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–∏ –≤–≤–æ–¥–µ
                    if (answerNum === item.answer) {
                        hintElement.textContent = "‚úì –í–µ—Ä–Ω–æ!";
                        hintElement.style.color = "#27ae60";
                        document.getElementById(`question-${index}`).style.backgroundColor = "#d4edda";
                    } else {
                        hintElement.textContent = "‚úó –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è";
                        hintElement.style.color = "#c0392b";
                        document.getElementById(`question-${index}`).style.backgroundColor = "#f8d7da";
                    }
                }
            });
            
            if (allFilled) {
                document.getElementById('submitTest').classList.remove('hidden');
                document.getElementById('checkTest').textContent = "–û–ë–ù–û–í–ò–¢–¨ –ü–†–û–í–ï–†–ö–£";
            } else {
                alert("‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —Ç–µ—Å—Ç–∞!");
            }
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
        function submitTest() {
            const studentName = document.getElementById('studentName').value.trim();
            const className = document.getElementById('className').value;
            const schoolName = document.getElementById('schoolName').value.trim();
            
            if (!studentName) {
                alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —Ç–µ—Å—Ç–∞.");
                document.getElementById('studentName').focus();
                return;
            }
            
            let correctCount = 0;
            let resultsHTML = `<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è ${studentName}, ${className} –∫–ª–∞—Å—Å${schoolName ? ', ' + schoolName : ''}</h3>`;
            resultsHTML += `<p><strong>–î–∞—Ç–∞:</strong> ${new Date().toLocaleString('ru-RU')}</p>`;
            resultsHTML += `<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                           <tr style="background-color: #4a6fa5; color: white;">
                           <th style="padding: 10px; text-align: left;">‚Ññ</th>
                           <th style="padding: 10px; text-align: left;">–ó–∞–¥–∞–Ω–∏–µ</th>
                           <th style="padding: 10px; text-align: left;">–í–∞—à –æ—Ç–≤–µ—Ç</th>
                           <th style="padding: 10px; text-align: left;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç</th>
                           <th style="padding: 10px; text-align: left;">–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
                           </tr>`;
            
            studentAnswers.forEach((item, index) => {
                if (item.isCorrect) correctCount++;
                
                resultsHTML += `<tr style="border-bottom: 1px solid #ddd; ${item.isCorrect ? 'background-color: #e8f7e8;' : 'background-color: #fdeaea;'}">
                               <td style="padding: 10px;">${index + 1}</td>
                               <td style="padding: 10px;">${item.question}</td>
                               <td style="padding: 10px;">${item.userAnswer}</td>
                               <td style="padding: 10px;">${item.correctAnswer}</td>
                               <td style="padding: 10px;">${item.isCorrect ? '<span style="color: #27ae60;">‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ</span>' : '<span style="color: #c0392b;">‚úó –û—à–∏–±–∫–∞</span>'}</td>
                               </tr>`;
            });
            
            resultsHTML += `</table></div>`;
            
            // –†–∞—Å—á–µ—Ç –æ—Ü–µ–Ω–∫–∏
            const percentage = (correctCount / TEST_CONFIG.questionsCount) * 100;
            let grade = 2;
            let gradeText = "";
            let gradeColor = "#e74c3c";
            
            if (percentage >= 85) {
                grade = 5;
                gradeText = "–û—Ç–ª–∏—á–Ω–æ!";
                gradeColor = "#27ae60";
            } else if (percentage >= 70) {
                grade = 4;
                gradeText = "–•–æ—Ä–æ—à–æ!";
                gradeColor = "#3498db";
            } else if (percentage >= 50) {
                grade = 3;
                gradeText = "–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ";
                gradeColor = "#f39c12";
            } else {
                grade = 2;
                gradeText = "–ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ. –ù—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª.";
                gradeColor = "#e74c3c";
            }
            
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            document.getElementById('scoreValue').textContent = `${correctCount} –∏–∑ ${TEST_CONFIG.questionsCount}`;
            document.getElementById('gradeContainer').innerHTML = `
                <div class="grade-badge" style="background-color: ${gradeColor};">–û—Ü–µ–Ω–∫–∞: ${grade}</div>
                <p style="font-size: 1.2em; color: ${gradeColor}; font-weight: bold;">${gradeText}</p>
                <p>–ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: <strong>${percentage.toFixed(1)}%</strong></p>
            `;
            
            document.getElementById('detailedResults').innerHTML = resultsHTML;
            document.getElementById('testResults').style.display = 'block';
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            const resultId = Date.now().toString(36) + Math.random().toString(36).substr(2);
            const resultLink = `${window.location.origin}${window.location.pathname}#result=${resultId}`;
            
            document.getElementById('resultLink').innerHTML = `
                <strong>–°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</strong><br>
                <a href="${resultLink}" target="_blank">${resultLink}</a>
                <p style="font-size: 0.9em; margin-top: 10px;">–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—á–∏—Ç–µ–ª—é</p>
            `;
            document.getElementById('resultLink').style.display = 'block';
            
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            saveTestResults(studentName, className, schoolName, correctCount, percentage, grade);
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
            document.getElementById('testResults').scrollIntoView({ behavior: 'smooth' });
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
            document.getElementById('checkTest').classList.add('hidden');
            document.getElementById('submitTest').classList.add('hidden');
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞
        function saveTestResults(name, className, school, correct, percentage, grade) {
            const resultData = {
                studentName: name,
                className: className,
                school: school,
                correctAnswers: correct,
                totalQuestions: TEST_CONFIG.questionsCount,
                percentage: percentage,
                grade: grade,
                testName: TEST_CONFIG.testName,
                date: new Date().toISOString(),
                timestamp: Date.now()
            };
            
            try {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                localStorage.setItem('lastTestResult', JSON.stringify(resultData));
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                let history = JSON.parse(localStorage.getItem('testHistory')) || [];
                history.push(resultData);
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é 50 –∑–∞–ø–∏—Å—è–º–∏
                if (history.length > 50) {
                    history = history.slice(-50);
                }
                
                localStorage.setItem('testHistory', JSON.stringify(history));
                
                // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
                sendResultsToServer(resultData);
                
                console.log("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã:", resultData);
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:", error);
            }
        }

        // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        function sendResultsToServer(data) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç AJAX-–∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            console.log("–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:", data);
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏
            setTimeout(() => {
                console.log("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä");
            }, 500);
        }

        // –°–±—Ä–æ—Å —Ç–µ—Å—Ç–∞
        function resetTest() {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ? –í—Å–µ –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.")) {
                // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –æ—Ç–≤–µ—Ç–æ–≤
                testQuestions.forEach((item, index) => {
                    const answerInput = document.getElementById(`answer${index}`);
                    if (answerInput) {
                        answerInput.value = '';
                        document.getElementById(`hint${index}`).textContent = '';
                        document.getElementById(`question-${index}`).style.backgroundColor = '#f9f9f9';
                    }
                });
                
                // –°–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                document.getElementById('testResults').style.display = 'none';
                document.getElementById('checkTest').classList.remove('hidden');
                document.getElementById('submitTest').classList.add('hidden');
                document.getElementById('checkTest').textContent = "–ü–†–û–í–ï–†–ò–¢–¨ –û–¢–í–ï–¢–´";
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–∞—á–∞–ª—É
                document.getElementById('studentName').focus();
            }
        }

        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function restoreTest() {
            const testStarted = localStorage.getItem('testStarted');
            const savedQuestions = localStorage.getItem('mathTestQuestions');
            
            if (testStarted === 'true' && savedQuestions) {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ—Å—Ç
                document.getElementById('accessPanel').classList.add('hidden');
                document.getElementById('testContent').classList.remove('hidden');
                
                testQuestions = JSON.parse(savedQuestions);
                displayTestQuestions();
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
                const savedAnswers = localStorage.getItem('testAnswers');
                if (savedAnswers) {
                    const answers = JSON.parse(savedAnswers);
                    answers.forEach(answer => {
                        const input = document.getElementById(`answer${answer.index}`);
                        if (input) {
                            input.value = answer.value;
                        }
                    });
                }
                
                testStarted = true;
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –ø—Ä–∏ –≤–≤–æ–¥–µ
        function saveAnswers() {
            if (!testStarted) return;
            
            const answers = [];
            testQuestions.forEach((item, index) => {
                const input = document.getElementById(`answer${index}`);
                if (input && input.value.trim() !== '') {
                    answers.push({
                        index: index,
                        value: input.value
                    });
                }
            });
            
            localStorage.setItem('testAnswers', JSON.stringify(answers));
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ—Å—Ç, –µ—Å–ª–∏ –æ–Ω –±—ã–ª –Ω–∞—á–∞—Ç
            restoreTest();
            
            // –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
            document.getElementById('startTest').addEventListener('click', checkAccess);
            document.getElementById('checkTest').addEventListener('click', checkAnswers);
            document.getElementById('submitTest').addEventListener('click', submitTest);
            document.getElementById('resetTest').addEventListener('click', resetTest);
            
            // –†–∞–∑—Ä–µ—à–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ –Ω–∞–∂–∞—Ç–∏—é Enter
            document.getElementById('accessCode').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkAccess();
                }
            });
            
            // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –ø—Ä–∏ –≤–≤–æ–¥–µ
            document.addEventListener('input', function(e) {
                if (e.target.classList.contains('answer-input')) {
                    saveAnswers();
                }
            });
            
            // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –∫–æ–¥–∞
            if (!localStorage.getItem('testStarted')) {
                document.getElementById('accessCode').focus();
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            document.getElementById('accessCode').value = TEST_CONFIG.accessCode;
        });
    </script>
</body>
</html>